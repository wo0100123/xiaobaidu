<?php    include('./config.php');    include('./DB.php');    // 1.获取数据    $db = new DB('users');        $tj = '';    // 判断是否提交了姓名条件    if (!empty($_GET['uname'])) {        $db->where(" uname like '%{$_GET['uname']}%'");        $tj .= "&uname={$_GET['uname']}";    }        // 判断是否提交了性别条件    if (!empty($_GET['sex'])) {        $db->where(" sex='{$_GET['sex']}' ");        $tj .= "&sex={$_GET['sex']}";    }    echo $tj,'<br>';// ------------------------------------    // 每页显示的记录个数    $perPage = 5;    // 当前要显示的页数    $nowPage = empty($_GET['page']) ? 1 : $_GET['page'];        $prevPage =  $nowPage - 1;  // 上一页    $nextPage =  $nowPage + 1;  // 下一页        // 求总记录数    $cnt = $db->rowCount();    // echo $cnt,'<Br>';        // 最大页数  ceil(总记录数/每页显示记录数);    $maxPage  = ceil($cnt/$perPage);            // 修正    if ($nowPage >= $maxPage) {        $nowPage = $nextPage = $maxPage;    }    if ($nowPage <= 1) {        $nowPage = $prevPage = 1;    }        $db->limit( ($nowPage-1)*$perPage, $perPage );    // ------------------------------------                $users = $db -> select();    ?><!--  2.显示数据  --><form action="./index.php"  method="get">   名称: <input type="text" name="uname" />   性别: <select name="sex">            <option value="">全部</option>            <option value="w">女</option>            <option value="m">男</option>            <option value="x">保密</option>         </select>    <input type="submit"  value="查询" /></form><table border=1>    <tr>        <th>UID</th>        <th>姓名</th>        <th>性别</th>        <th>年龄</th>        <th>班级</th>        <th>操作</th>    </tr><?php foreach($users as $k=>$v): ?>        <tr>        <td><?=$v->uid?></td>        <td><?=$v->uname?></td>        <td><?php          if ($v->sex=='w') {             echo '女';          } else if ($v->sex=='m') {             echo '男';          } else if ($v->sex=='x') {             echo '保密';          }        ?></td>        <td><?=$v->age?></td>        <td><?=$v->classid?></td>        <td>            <a href="./destroy.php?uid=<?=$v->uid?>">删除</a>            <a href="./edit.php?uid=<?=$v->uid?>">修改</a>        </td>    </tr><?php endforeach;  ?></table><br><a href="./index.php?page=1<?=$tj?>">首页</a><a href="./index.php?page=<?=$prevPage.$tj?>">上一页</a><a href="./index.php?page=<?=$nextPage.$tj?>">下一页</a><a href="./index.php?page=<?=$maxPage.$tj?>">尾页</a>